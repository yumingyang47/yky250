<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>æ‘©å¤©è½®ä¸ç²‰è‰²çˆ±å¿ƒçƒŸèŠ±</title>

<!-- å¼•å…¥ Google å­—ä½“ -->
<link href="https://fonts.googleapis.com/css2?family=Dancing+Script&display=swap" rel="stylesheet">

<style>
body {
  margin: 0;
  overflow: hidden;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
  background: #ffb7d5;
}

/* ä¸Šæ–¹æ–‡å­— */
#introText {
  position: absolute;
  left: 50%;
  top: 30%;
  transform: translateX(-50%);
  font-size: 28px;
  font-weight: 500;
  color: white;
  text-align: center;
  max-width: 80%;
  word-wrap: break-word;
  line-height: 1.4;
  z-index: 20;
  font-family: 'Dancing Script', cursive;
  white-space: pre-wrap;
}

/* æŒ‰é’® */
#startBtn {
  position: absolute;
  left: 50%;
  top: 55%;
  transform: translate(-50%, -50%);
  padding: 16px 40px;
  min-width: 200px;
  font-size: 22px;
  font-weight: 600;
  color: white;
  background: linear-gradient(135deg,#ff5f8e,#ff8ab4);
  border-radius: 999px;
  border: none;
  cursor: pointer;
  box-shadow: 0 10px 25px rgba(255,107,150,0.6);
  z-index: 20;
  white-space: nowrap;
  text-align: center;
  transition: transform 0.3s ease;
}

#startBtn:hover {
  transform: translate(-50%, -50%) scale(1.08);
  box-shadow: 0 12px 35px rgba(255,107,150,0.8);
}

/* æ‰‹æœºç«¯è‡ªé€‚åº”æ–‡å­—å’ŒæŒ‰é’® */
@media (max-width: 480px){
  #startBtn {
    padding: 12px 20px;
    font-size: 18px;
    min-width: 160px;
  }
  #introText {
    font-size: 20px;
    max-width: 90%;
  }
  #loveTimer {
    font-size: 18px;
  }
}

/* åœºæ™¯ */
#scene {
  display: none;
  width: 100vw;
  height: 100vh;
  position: fixed;
  inset: 0;
  background: #ffb7d5;
  overflow: hidden;
}

/* æ‘©å¤©è½®å®¹å™¨ */
#wheel-container {
  position: absolute;
  width: 300px;
  height: 300px;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  z-index: 10;
}

/* æ‘©å¤©è½®æ—‹è½¬éƒ¨åˆ† */
#wheel-rotating {
  width: 100%;
  height: 100%;
  transform-origin: center;
}

/* å°èˆ±æ ·å¼ */
.cabin {
  width: 30px;
  height: 30px;
  box-sizing: border-box;
  background-color: #ffe3f7;
  border: 3px solid #ff6bb5;
  border-radius: 8px;
  display: flex;
  justify-content: center;
  align-items: center;
  box-shadow: 0 5px 12px rgba(255,107,181,0.4);
  font-size: 16px;
  color: #ff2d6a;
  pointer-events: none;
}

/* çƒŸèŠ± canvas */
#fireworks {
  position: fixed;
  inset: 0;
  z-index: 1;
  pointer-events: none;
}

/* æ‹çˆ±è®¡æ—¶ */
#loveTimer {
  position: absolute;
  left: 50%;
  top: 75%;
  transform: translateX(-50%);
  font-size: 22px;
  font-weight: 500;
  color: white;
  text-align: center;
  font-family: 'Dancing Script', cursive;
  z-index: 20;
  line-height: 1.4;
}
</style>
</head>
<body>

<!-- æ‰“å­—æœºæ–‡å­— -->
<div id="introText"></div>
<!-- æŒ‰é’® -->
<button id="startBtn">ç‚¹å‡» æœ‰æƒŠå–œğŸ’—</button>

<!-- åœºæ™¯ -->
<div id="scene">
  <canvas id="fireworks"></canvas>
  <div id="wheel-container">
    <svg id="wheel" viewBox="0 0 400 400">
      <line x1="200" y1="400" x2="200" y2="200" stroke="#5a7b9a" stroke-width="12"/>
      <g id="wheel-rotating">
        <circle cx="200" cy="200" r="140" stroke="#a6d8ff" stroke-width="6" fill="none" stroke-dasharray="4,4"/>
        <circle cx="200" cy="200" r="145" stroke="#87c3ff" stroke-width="2" fill="none"/>
        <g id="spokes"></g>
        <g id="cabins-group"></g>
        <circle cx="200" cy="200" r="15" fill="#5a7b9a"/>
        <circle cx="200" cy="200" r="8" fill="#fff"/>
        <circle cx="200" cy="200" r="4" fill="#ff6bb5"/>
      </g>
    </svg>
  </div>
  <!-- æ‹çˆ±è®¡æ—¶æ˜¾ç¤º -->
  <div id="loveTimer"></div>
</div>

<script>
const btn = document.getElementById("startBtn");
const scene = document.getElementById("scene");
const introText = document.getElementById("introText");
const loveTimerDiv = document.getElementById("loveTimer");

// æ‰“å­—æœºæ–‡å­—
const message = "The new scene of the New year, love companion.";
let index = 0;
function typeWriter(){
  if(index < message.length){
    introText.textContent += message[index];
    index++;
    setTimeout(typeWriter, 100);
  }
}
typeWriter();

// ç‚¹å‡»æŒ‰é’®æ˜¾ç¤ºåœºæ™¯
btn.onclick = () => {
  btn.style.display = "none";
  introText.style.display = "none";
  scene.style.display = "block";
  createWheelCabins();
  startWheelRotation();
  startFireworks();
  startLoveTimer(); // å¯åŠ¨æ‹çˆ±è®¡æ—¶
};

// åˆ›å»ºè½®è¾å’Œå°èˆ±
function createWheelCabins(){
  const group = document.getElementById("cabins-group");
  const spokes = document.getElementById("spokes");
  const center = 200;
  const radius = 140;
  const numCabins = 8;

  group.innerHTML = '';
  spokes.innerHTML = '';

  for(let i=0;i<numCabins;i++){
    const angle = (Math.PI*2*i)/numCabins;

    // è½®è¾
    const line = document.createElementNS("http://www.w3.org/2000/svg","line");
    line.setAttribute("x1", center);
    line.setAttribute("y1", center);
    line.setAttribute("x2", center + radius*Math.cos(angle));
    line.setAttribute("y2", center + radius*Math.sin(angle));
    line.setAttribute("stroke","#ff6bb5");
    line.setAttribute("stroke-width","2");
    spokes.appendChild(line);

    // å°èˆ±
    const x = center + radius*Math.cos(angle) - 15;
    const y = center + radius*Math.sin(angle) - 15;
    const foreign = document.createElementNS("http://www.w3.org/2000/svg","foreignObject");
    foreign.setAttribute("x", x);
    foreign.setAttribute("y", y);
    foreign.setAttribute("width",30);
    foreign.setAttribute("height",30);
    const div = document.createElement("div");
    div.classList.add("cabin");
    if(i===0) div.textContent="â¤ï¸";
    foreign.appendChild(div);
    group.appendChild(foreign);
  }
}

// æ‘©å¤©è½®æ—‹è½¬
function startWheelRotation(){
  const wheel = document.getElementById("wheel-rotating");
  let deg = 90;
  function rotate(){
    deg += 0.2;
    wheel.style.transform = `rotate(${deg}deg)`;
    requestAnimationFrame(rotate);
  }
  rotate();
}

// çˆ±å¿ƒæ–¹ç¨‹
function heartShape(t){
  return {x:16*Math.pow(Math.sin(t),3), y:-(13*Math.cos(t)-5*Math.cos(2*t)-2*Math.cos(3*t)-Math.cos(4*t))};
}

// çƒŸèŠ±
function startFireworks(){
  const canvas = document.getElementById("fireworks");
  const ctx = canvas.getContext("2d");
  function resize(){canvas.width=window.innerWidth; canvas.height=window.innerHeight;}
  resize();
  window.onresize = resize;

  let particles=[];
  const fireworkDuration=800;

  function createFirework(){
    particles=[];
    const x=Math.random()*canvas.width*0.8+canvas.width*0.1;
    const y=Math.random()*canvas.height*0.4+100;
    for(let i=0;i<180;i++){
      const t=(Math.PI*2)*(i/180);
      const h=heartShape(t);
      particles.push({
        x,y,
        vx:h.x*(Math.random()*0.3+0.3),
        vy:h.y*(Math.random()*0.3+0.3),
        alpha:1,
        size:0.5+Math.random(),
        decay:Math.random()*0.015+0.01,
        color:`hsl(${Math.random()*20+330},100%,${70+Math.random()*20}%)`
      });
    }
    setTimeout(createFirework, fireworkDuration);
  }

  function loop(){
    ctx.fillStyle="rgba(255,183,213,0.1)";
    ctx.fillRect(0,0,canvas.width,canvas.height);
    for(let i=particles.length-1;i>=0;i--){
      const p=particles[i];
      p.x+=p.vx*0.35;
      p.y+=p.vy*0.35;
      p.vy+=0.03;
      p.alpha-=p.decay;
      if(p.alpha<=0){particles.splice(i,1); continue;}
      ctx.globalAlpha=p.alpha;
      ctx.fillStyle=p.color;
      ctx.beginPath();
      ctx.arc(p.x,p.y,p.size,0,Math.PI*2);
      ctx.fill();
    }
    requestAnimationFrame(loop);
  }

  createFirework();
  loop();
}

// æ‹çˆ±è®¡æ—¶
function startLoveTimer() {
  const timerDiv = loveTimerDiv;
  const startTime = new Date(2023, 11, 1, 12, 30, 0); // æœˆä»½0-11ï¼Œ12æœˆæ˜¯11

  function updateTimer() {
    const now = new Date();
    let diff = Math.floor((now - startTime) / 1000); // ç§’
    const days = Math.floor(diff / (3600*24));
    diff -= days*3600*24;
    const hours = Math.floor(diff / 3600);
    diff -= hours*3600;
    const minutes = Math.floor(diff / 60);
    const seconds = diff - minutes*60;

    timerDiv.innerHTML = `æˆ‘ä»¬æ‹çˆ±å·²æœ‰<br>${days}å¤© ${hours}å°æ—¶ ${minutes}åˆ†é’Ÿ ${seconds}ç§’`;
  }

  updateTimer();
  setInterval(updateTimer, 1000);
}
</script>

</body>
</html>
